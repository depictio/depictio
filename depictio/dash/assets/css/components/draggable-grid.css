/* =============================================================================
   DRAGGABLE GRID COMPONENTS
   All styles related to the draggable grid layout system
   ============================================================================= */

/* Draggable components background */
.react-grid-item,
.react-grid-item .card,
.react-grid-item [data-mantine="Card"],
#draggable .react-grid-item,
#draggable .react-grid-item > *,
#draggable .react-grid-item [class*="Card"] {
    background-color: var(--app-surface-color, var(--depictio-surface-light)) !important;
    color: var(--app-text-color, var(--depictio-text-light)) !important;
    transition: background-color 0.2s ease, color 0.2s ease;
}

/* Bootstrap card components in draggable items */
.react-grid-item .card-body,
.react-grid-item .card-header,
#draggable .card,
#draggable .card-body,
#draggable .card-header {
    background-color: var(--app-surface-color, var(--depictio-surface-light)) !important;
    color: var(--app-text-color, var(--depictio-text-light)) !important;
    transition: background-color 0.2s ease, color 0.2s ease;
}

/* Style resize handles to be invisible like in prototype */
.react-grid-item > .react-resizable-handle {
    background: transparent !important;
    border: none !important;
    box-shadow: none !important;
    opacity: 0 !important;
}

.react-grid-item:hover > .react-resizable-handle {
    opacity: 0.7 !important;
}

/* Dark mode - make handle arrow icons white/light grey */
[data-mantine-color-scheme="dark"] .react-grid-item:hover > .react-resizable-handle::before,
[data-mantine-color-scheme="dark"] .react-grid-item:hover > .react-resizable-handle::after {
    filter: invert(1) !important;
}

/* Hide container completely in dark mode */
[data-mantine-color-scheme="dark"] .react-grid-item:hover > .react-resizable-handle {
    background: none !important;
    background-color: transparent !important;
    background-image: none !important;
    border: none !important;
    box-shadow: none !important;
    outline: none !important;
}

/* Add stroke when dragging or resizing */
.react-grid-item.react-grid-item-dragging,
.react-grid-item.react-grid-item-resizing {
    border: 2px solid var(--app-text-color, #666) !important;
    box-shadow: 0 0 0 1px rgba(102, 102, 102, 0.2) !important;
    z-index: 1000 !important;
}

/* Add stroke when hovering over drag handle */
.react-grid-item:has(.react-grid-dragHandle:hover) {
    border: 1px solid var(--app-text-color, #666) !important;
    box-shadow: 0 0 0 1px rgba(102, 102, 102, 0.1) !important;
}

/* Add stroke when hovering over resize handles */
.react-grid-item:hover {
    border: 1px solid var(--app-border-color, #dee2e6) !important;
    transition: border-color 0.2s ease, box-shadow 0.2s ease !important;
}

/* Hide remove button (×) */
.react-grid-item .remove,
.react-grid-item span.remove {
    display: none !important;
    visibility: hidden !important;
}

/* Style drag handle for theme compatibility */
.react-grid-dragHandle {
    background: var(--app-surface-color, #f8f9fa) !important;
    color: var(--app-text-color, #333) !important;
    border: 1px solid var(--app-border-color, #dee2e6) !important;
    border-radius: 4px !important;
    font-size: 12px !important;
    font-weight: 500 !important;
    transition: all 0.2s ease !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    gap: 4px !important;
}

.react-grid-dragHandle:hover {
    background: var(--app-border-color, #e9ecef) !important;
    border-color: var(--app-text-color, #333) !important;
}

/* Add hand icon before the text */
.react-grid-dragHandle::before {
    content: "✋" !important;
    font-size: 14px !important;
    margin-right: 2px !important;
}

/* Draggable component background enhancement */
.react-grid-item.dashboard-component-hover {
    background: var(--app-surface-color);
    border: 1px solid var(--app-border-color);
    border-radius: 8px;
    transition: all 0.3s ease;
}

.react-grid-item.dashboard-component-hover:hover {
    border-color: var(--app-text-color, #666);
    box-shadow: 0 4px 12px rgba(102, 102, 102, 0.15);
}

/* Component interaction effects */
.dashboard-component-hover {
    position: relative;
    transition: transform 0.2s ease;
}

.dashboard-component-hover:hover {
    transform: translateY(-2px);
}

.dashboard-component-hover::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, transparent, rgba(99, 102, 241, 0.05), transparent);
    opacity: 0;
    transition: opacity 0.3s ease;
    z-index: 1;
    pointer-events: none;
}

.dashboard-component-hover:hover::before {
    opacity: 1;
}

/* =============================================================================
   DRAG DISABLE FUNCTIONALITY - REMOVED
   Now using properties-only approach like the working version2 script
   ============================================================================= */

/* Hide drag handles when edit mode is disabled */
.drag-handles-hidden .react-grid-dragHandle {
    display: none !important;
    visibility: hidden !important;
}
