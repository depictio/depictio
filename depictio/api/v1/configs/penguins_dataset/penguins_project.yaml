# Palmer Penguins Multi-Species Analysis for Depictio
name: "Palmer Penguins Species Comparison"
project_type: "advanced"
is_public: true
workflows:
  - name: "penguin_species_analysis"
    engine:
      name: "python"
      version: "3.11"
    description: "Comparative analysis of Palmer Archipelago penguin species"
    data_location:
      structure: "sequencing-runs"
      runs_regex: "run_*"
      locations:
        - ../api/v1/configs/penguins_dataset
    data_collections:
      # Physical features only
      - data_collection_tag: "physical_features"
        description: "Physical characteristics measurements"
        config:
          type: "Table"
          metatype: "Aggregate"
          scan:
            mode: "recursive"
            scan_parameters:
              regex_config:
                pattern: "physical_features.csv"
          dc_specific_properties:
            format: "CSV"
            polars_kwargs:
              separator: ","
            columns_description:
              individual_id: "Unique individual penguin ID within species"
              bill_length_mm: "Bill length in millimeters"
              bill_depth_mm: "Bill depth in millimeters"
              flipper_length_mm: "Flipper length in millimeters"
              body_mass_g: "Body mass in grams"
          join:
            on_columns:
              - individual_id
            how: "inner"
            with_dc:
              - "demographic_data"

      # Demographic data
      - data_collection_tag: "demographic_data"
        description: "Location and demographic information"
        config:
          type: "Table"
          metatype: "Aggregate"
          scan:
            mode: "recursive"
            scan_parameters:
              regex_config:
                pattern: "demographic_data.csv"
          dc_specific_properties:
            format: "CSV"
            polars_kwargs:
              separator: ","
            columns_description:
              individual_id: "Unique individual penguin ID within species"
              island: "Island location"
              sex: "Penguin sex"
              year: "Observation year"
              species: "Species name"

      # MultiQC data
      - data_collection_tag: "multiqc_data"
        description: "MultiQC report data"
        config:
          type: "MultiQC"
          multiqc_kwargs:
            analysis_dir: # Path(s) to search for files to parse >> always multiqc.parquet here
            verbose: # Print more information to the console
            file_list: # Supply a file containing a list of file paths to be searched, one per row
            prepend_dirs: # Prepend directory to sample names
            dirs_depth: # Prepend n directories to sample names. Negative number to take from start of path
            fn_clean_sample_names: # Do not clean the sample names (leave as full file name)
            require_logs: # Require all explicitly requested modules to have log files. If not, MultiQC will exit with an error
            use_filename_as_sample_name: # Use the log filename as the sample name
            strict: # Don't catch exceptions, run additional code checks to help development
            quiet:  #Only show log warnings
            no_ansi: # Disable coloured log output
            profile_runtime: # Add analysis of how long MultiQC takes to run to the report
            no_version_check: # Disable checking the latest MultiQC version on the server
            ignore: # Ignore analysis files
            ignore_samples: # Ignore sample names
            run_modules: # Use only this module. Can specify multiple times
            exclude_modules: # Do not use this module. Can specify multiple times
            config_files: # Specific config file to load, after those in MultiQC dir / home dir / working dir
            module_order: # Names of modules in order of precedence to show in report
            extra_fn_clean_exts: # Extra file extensions to clean from sample names
            extra_fn_clean_trim: # Extra strings to clean from sample names
            preserve_module_raw_data: # Preserve raw data from modules in the report - besides plots. Useful to use later interactively. Defaults to True. Set to False to save memory.
