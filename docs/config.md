# Depictio YAML Configuration

## Overview
This document details the configuration for the MosaiCatcher pipeline, focusing on defining workflows and data collections within the system.

## Configuration Schema

### `depictio_version`
- **Type**: String
- **Description**: Version of the configuration file format.
- **Example**: "0.1.0"
- **Required**: Yes
- **Validation**: Must respect the semantic versioning format (e.g., "0.1.0").

### `workflows`
#### `workflows.engine`
- **Type**: String
- **Description**: The workflow engine used to execute the workflow.
- **Example**: "snakemake"
- **Required**: Yes

#### `workflows.name`
- **Type**: String
- **Description**: Name of the workflow.
- **Example**: "mosaicatcher-pipeline"
- **Required**: Yes

#### `workflows.description`
- **Type**: String
- **Description**: A brief description of what the workflow does.
- **Example**: "Strand-Seq SV calling framework"
- **Required**: No

#### `workflows.repository_url`
- **Type**: String
- **Description**: URL to the repository containing the workflow source code.
- **Example**: "https://github.com/friendsofstrandseq/mosaicatcher-pipeline"
- **Required**: Yes

#### `workflows.config`

The configuration to retrieve workflow data.

##### `workflows.config.parent_runs_location`
- **Type**: List
- **Description**: Directories containing the workflow execution data.
- **Example**: ["/Users/tweber/Data/mosaicatcher-pipeline"]
- **Required**: Yes
- **Validation**: Must be a list of valid directory paths.

##### `workflows.config.runs_regex`
- **Type**: String
- **Description**: Regex pattern to match run directories.
- **Example**: ".*"
- **Required**: Yes
- **Validation**: Must be a valid regex pattern.


#### `workflows.data_collections`

### Common data collection configuration

##### `workflows.data_collections.data_collection_tag`
- **Type**: String
- **Description**: Identifier for the data collection.
- **Example**: "mosaicatcher_stats"
- **Required**: Yes
- **Validation**: Must be a unique identifier.

##### `workflows.data_collections.description`
- **Type**: String
- **Description**: Description of the data collection.
- **Example**: "Statistics file generated by MosaiCatcher"
- **Required**: No

##### `workflows.data_collections.config`
###### `workflows.data_collections.config.type`
- **Type**: String
- **Description**: Type of data collection (e.g., Table, JBrowse2).
- **Possible Values**: "Table", "JBrowse2"
- **Required**: Yes

##### `workflows.data_collections.config.format`
- **Type**: String
- **Description**: File format of the data collection.
- **Required**: Yes

#### Join Configuration

##### `workflows.data_collections.config.join.with_dc`
- **Type**: List
- **Description**: List of data collection tags to join with.
- **Required**: No
- **Validation**: Must be a list of valid data collection tags referencing other data collections.

##### `workflows.data_collections.config.join.how`
- **Type**: String
- **Description**: Type of join used (e.g., "inner").
- **Possible Values**: "inner", "outer", "left", "right"
- **Required**: No
- **Default**: "inner"

##### `workflows.data_collections.config.join.on_columns`
- **Type**: List
- **Description**: Columns used for joining data collections.

#### Regex Configuration

##### `workflows.data_collections.regex.pattern`
- **Type**: String
- **Description**: Regex pattern to match files within the data collection.
- **Required**: Yes

##### `workflows.data_collections.regex.type`
- **Type**: String
- **Description**: Specifies the file matching strategy.
- **Possible Values**: "file-based", "path-based"


## Specific Data Collection Configuration

### Table Type Data Collection

If you are defining a `Table` type data collection, you need to provide the following additional configuration options.

##### `workflows.data_collections.config.dc_specific_properties.polars_kwargs`
- **Type**: Dictionary
- **Description**: Additional arguments for processing data frames.
- **Required**: No

##### `workflows.data_collections.config.dc_specific_properties.keep_columns`
- **Type**: List
- **Description**: Specifies which columns to retain in the dataset.
- **Required**: No



### JBrowse2 Type Data Collection

If you are defining a `JBrowse2` type data collection, you need to provide the following additional configuration options.

##### `workflows.data_collections.config.dc_specific_properties.index_extension`
- **Type**: String
- **Description**: Extension of the index file for the data collection.
- **Required**: Yes
- **Validation**: Must be a valid file extension.

##### `workflows.data_collections.config.dc_specific_properties.jbrowse_template_location`
- **Type**: String
- **Description**: Location of the JBrowse template for the data collection.
- **Required**: No
