# EMBL Dev Environment - dev.demo.depictio.embl.org
# All tags (including beta) deploy to this environment
#
# Layered on top of:
#   - values.yaml (base configuration)
#   - values-embl-unauth.yaml (EMBL infrastructure + unauthenticated mode)
#   - values-embl-secrets.yaml (S3 credentials)

# Celery worker (enabled for background tasks)
celery:
  enabled: true
  replicas: 1
  resources:
    requests:
      memory: "512Mi"
      cpu: "250m"
    limits:
      memory: "2Gi"
      cpu: "1"

# Google Analytics - Dev Tracking ID
backend:
  env:
    DEPICTIO_GOOGLE_ANALYTICS_ENABLED: "true"
    DEPICTIO_GOOGLE_ANALYTICS_TRACKING_ID: "G-MCC33FDF2Z"

frontend:
  env:
    DEPICTIO_GOOGLE_ANALYTICS_ENABLED: "true"
    DEPICTIO_GOOGLE_ANALYTICS_TRACKING_ID: "G-MCC33FDF2Z"

# Ingress - Dev Environment
ingress:
  enabled: true
  ingressClassName: "external-users"

  annotations:
    cert-manager.io/cluster-issuer: harica-issuer

  hosts:
    - host: "dev.demo.depictio.embl.org"
      paths:
        - path: /
          pathType: Prefix
          service:
            name: depictio-frontend
            portName: http
    - host: "dev.api.demo.depictio.embl.org"
      paths:
        - path: /
          pathType: Prefix
          service:
            name: depictio-backend
            portName: http

  tls:
    - hosts:
        - "dev.demo.depictio.embl.org"
        - "dev.api.demo.depictio.embl.org"
      secretName: devdemo-depictio-tls

# Global domain settings
global:
  domain: "depictio.embl.org"
  urlPattern:
    type: "subdomain"
    subdomain: "dev"
